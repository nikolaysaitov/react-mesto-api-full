{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._headers = headers;\n    this._baseUrl = baseUrl; // тело конструктора\n  }\n\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  getProfile(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(this._getResponseData);\n  }\n\n  getInitialCards(token) {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(this._getResponseData);\n  }\n\n  editProfile(name, about, token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        about\n      })\n    }).then(this._getResponseData);\n  }\n\n  addCard(name, link, token) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        link\n      })\n    }).then(this._getResponseData);\n  }\n\n  deleteCard(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(this._getResponseData);\n  }\n\n  deleteLike(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(this._getResponseData);\n  }\n\n  addLike(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"PUT\",\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(this._getResponseData);\n  }\n\n  updateAvatar(avatar, token) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        avatar\n      })\n    }).then(this._getResponseData);\n  } // другие методы работы с API\n\n\n} // // export const api = new Api({\n// //   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-39\",\n// //   headers: {\n// //     authorization: \"083f1856-1d24-41b5-bab8-7705d2d18558\",\n// //     \"Content-Type\": \"application/json\",\n// //   },\n// // });\n// export const api = new Api({\n//   baseUrl: \"http://localhost:3000/\",\n// });\n\n\nlet baseUrl = '';\nconst {\n  NODE_ENV\n} = process.env;\nconsole.log(NODE_ENV);\n\nif (NODE_ENV === 'production') {\n  baseUrl = 'https://saitovkmsapi.nomoredomains.xyz/';\n} else {\n  baseUrl = 'http://localhost:3000';\n}\n\nexport const api = new Api({\n  baseUrl: baseUrl,\n  headers: {\n    'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  }\n});","map":{"version":3,"sources":["/Users/nikolay/Desktop/react-mesto-api-full/frontend/src/utils/Api.js"],"names":["Api","constructor","baseUrl","headers","_headers","_baseUrl","_getResponseData","res","ok","Promise","reject","status","json","getProfile","token","fetch","then","getInitialCards","editProfile","name","about","method","body","JSON","stringify","addCard","link","deleteCard","id","deleteLike","addLike","updateAvatar","avatar","NODE_ENV","process","env","console","log","api","localStorage","getItem"],"mappings":"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","sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._headers = headers;\n    this._baseUrl = baseUrl; // тело конструктора\n  }\n\n  _getResponseData(res) {\n    if (!res.ok) {\n        return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n}\n\n  getProfile(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n      .then(this._getResponseData)\n      \n  }\n\n  getInitialCards(token) {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n    .then(this._getResponseData)\n      \n  }\n\n  editProfile(name, about, token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      },\n      body: JSON.stringify({\n        name,\n        about,\n      }),\n    })\n    .then(this._getResponseData)\n    \n  }\n  addCard(name, link, token) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      },\n      body: JSON.stringify({\n        name,\n        link,\n      }),\n    })\n    .then(this._getResponseData)\n    \n  }\n  deleteCard(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n    .then(this._getResponseData)\n      \n  }\n\n  deleteLike(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n    .then(this._getResponseData)\n      \n  }\n\n  addLike(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"PUT\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n    .then(this._getResponseData)\n    \n  }\n\n  \n  updateAvatar(avatar, token) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      },\n      body: JSON.stringify({\n        avatar\n      })\n    })\n    .then(this._getResponseData)\n    \n  }\n  \n\n  // другие методы работы с API\n}\n\n// // export const api = new Api({\n// //   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-39\",\n// //   headers: {\n// //     authorization: \"083f1856-1d24-41b5-bab8-7705d2d18558\",\n// //     \"Content-Type\": \"application/json\",\n// //   },\n// // });\n\n// export const api = new Api({\n//   baseUrl: \"http://localhost:3000/\",\n// });\nlet baseUrl = '';\nconst { NODE_ENV } = process.env;\nconsole.log(NODE_ENV)\nif (NODE_ENV === 'production') {\n  baseUrl = 'https://saitovkmsapi.nomoredomains.xyz/';\n} else {\n  baseUrl = 'http://localhost:3000'\n}\nexport const api = new Api({\n  baseUrl: baseUrl,\n  headers: {\n    'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  }\n});\n\n"]},"metadata":{},"sourceType":"module"}