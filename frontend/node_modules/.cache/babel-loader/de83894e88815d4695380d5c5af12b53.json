{"ast":null,"code":"import _classCallCheck from\"/Users/nikolay/Desktop/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/nikolay/Desktop/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._headers=headers;this._baseUrl=baseUrl;// тело конструктора\n}_createClass(Api,[{key:\"_getResponseData\",value:function _getResponseData(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}return res.json();}},{key:\"getProfile\",value:function getProfile(token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{headers:{'Authorization':\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}}).then(this._getResponseData);}},{key:\"getInitialCards\",value:function getInitialCards(token){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{headers:{'Authorization':\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}}).then(this._getResponseData);}},{key:\"editProfile\",value:function editProfile(name,about,token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"PATCH\",headers:{'Authorization':\"Bearer \".concat(token),\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,about:about})}).then(this._getResponseData);}},{key:\"addCard\",value:function addCard(name,link,token){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:\"POST\",headers:{'Authorization':\"Bearer \".concat(token),\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,link:link})}).then(this._getResponseData);}},{key:\"deleteCard\",value:function deleteCard(id,token){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id),{method:\"DELETE\",headers:{'Authorization':\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}}).then(this._getResponseData);}},{key:\"deleteLike\",value:function deleteLike(id,token){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:\"DELETE\",headers:{'Authorization':\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}}).then(this._getResponseData);}},{key:\"addLike\",value:function addLike(id,token){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:\"PUT\",headers:{'Authorization':\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}}).then(this._getResponseData);}},{key:\"updateAvatar\",value:function updateAvatar(avatar,token){return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:\"PATCH\",headers:{'Authorization':\"Bearer \".concat(token),\"Content-Type\":\"application/json\"},body:JSON.stringify({avatar:avatar})}).then(this._getResponseData);}// другие методы работы с API\n}]);return Api;}();// // export const api = new Api({\n// //   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-39\",\n// //   headers: {\n// //     authorization: \"083f1856-1d24-41b5-bab8-7705d2d18558\",\n// //     \"Content-Type\": \"application/json\",\n// //   },\n// // });\nexport var api=new Api({baseUrl:\"http://localhost:3000/\",headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('jwt')),'Content-Type':'application/json','Accept':'application/json'}});// let baseUrl = '';\n// const { NODE_ENV } = process.env;\n// console.log(NODE_ENV)\n// if (NODE_ENV === 'production') {\n//   baseUrl = 'https://saitovkmsapi.nomoredomains.xyz/';\n// } else {\n//   baseUrl = 'http://localhost:3000'\n// }","map":{"version":3,"sources":["/Users/nikolay/Desktop/react-mesto-api-full/frontend/src/utils/Api.js"],"names":["Api","baseUrl","headers","_headers","_baseUrl","res","ok","Promise","reject","status","json","token","fetch","then","_getResponseData","name","about","method","body","JSON","stringify","link","id","avatar","api","localStorage","getItem"],"mappings":"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","sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._headers = headers;\n    this._baseUrl = baseUrl; // тело конструктора\n  }\n\n  _getResponseData(res) {\n    if (!res.ok) {\n        return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n}\n\n  getProfile(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n      .then(this._getResponseData)\n      \n  }\n\n  getInitialCards(token) {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n    .then(this._getResponseData)\n      \n  }\n\n  editProfile(name, about, token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      },\n      body: JSON.stringify({\n        name,\n        about,\n      }),\n    })\n    .then(this._getResponseData)\n    \n  }\n  addCard(name, link, token) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      },\n      body: JSON.stringify({\n        name,\n        link,\n      }),\n    })\n    .then(this._getResponseData)\n    \n  }\n  deleteCard(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n    .then(this._getResponseData)\n      \n  }\n\n  deleteLike(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n    .then(this._getResponseData)\n      \n  }\n\n  addLike(id, token) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: \"PUT\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      }\n    })\n    .then(this._getResponseData)\n    \n  }\n\n  \n  updateAvatar(avatar, token) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: { \n        'Authorization': `Bearer ${token}`,\n        \"Content-Type\": \"application/json\", \n      },\n      body: JSON.stringify({\n        avatar\n      })\n    })\n    .then(this._getResponseData)\n    \n  }\n  \n\n  // другие методы работы с API\n}\n\n// // export const api = new Api({\n// //   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-39\",\n// //   headers: {\n// //     authorization: \"083f1856-1d24-41b5-bab8-7705d2d18558\",\n// //     \"Content-Type\": \"application/json\",\n// //   },\n// // });\n\n\nexport const api = new Api({\n  baseUrl: \"http://localhost:3000/\",\n  headers: {\n    'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  }\n});\n// let baseUrl = '';\n// const { NODE_ENV } = process.env;\n// console.log(NODE_ENV)\n// if (NODE_ENV === 'production') {\n//   baseUrl = 'https://saitovkmsapi.nomoredomains.xyz/';\n// } else {\n//   baseUrl = 'http://localhost:3000'\n// }\n\n\n"]},"metadata":{},"sourceType":"module"}